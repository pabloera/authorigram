#!/bin/zsh

# Auto-ativaÃ§Ã£o do Poetry para projeto dataanalysis-bolsonarismo
# Este arquivo Ã© carregado automaticamente quando vocÃª entra na pasta do projeto

PROJECT_DIR="$HOME/development/project/dataanalysis-bolsonarismo"

# FunÃ§Ã£o para detectar se estamos no projeto
in_project_dir() {
    [[ "$PWD" == "$PROJECT_DIR" || "$PWD" == "$PROJECT_DIR"/* ]]
}

# FunÃ§Ã£o para ativar Poetry
activate_poetry_env() {
    if in_project_dir && [[ -f "$PROJECT_DIR/pyproject.toml" ]]; then
        if [[ "$VIRTUAL_ENV" != "$PROJECT_DIR/.venv" ]]; then
            echo "ðŸŽ¯ Ativando Poetry para dataanalysis-bolsonarismo..."
            source "$PROJECT_DIR/.venv/bin/activate"
            echo "âœ… Ambiente ativo: $(python --version)"
            echo "ðŸ“¦ LocalizaÃ§Ã£o: $VIRTUAL_ENV"
        fi
    fi
}

# Hook que executa quando o diretÃ³rio muda
chpwd_poetry() {
    activate_poetry_env
}

# Adicionar o hook
autoload -U add-zsh-hook
add-zsh-hook chpwd chpwd_poetry

# Ativar na entrada inicial se jÃ¡ estiver na pasta
activate_poetry_env
